<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CTF é€šç”¨è§£ç å·¥å…·</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
    </style>
</head>
<body class="p-4 sm:p-8 flex justify-center items-center min-h-screen">
    <div class="w-full max-w-2xl bg-white p-6 sm:p-8 rounded-xl shadow-2xl">
        <h1 class="text-3xl font-bold text-center text-indigo-700 mb-6">ğŸš© CTF é€šç”¨è§£ç å·¥å…·</h1>
        <p class="text-gray-600 text-center mb-8">è¯·å°†æ‚¨ä»å›¾ç‰‡ä¸­æå–åˆ°çš„å¯ç–‘å­—ç¬¦ä¸²ï¼ˆå¦‚ Base64ã€Hex ç¼–ç ï¼‰ç²˜è´´åˆ°ä¸‹æ–¹è¿›è¡Œå°è¯•è§£ç ã€‚</p>

        <!-- è¾“å…¥åŒºåŸŸ -->
        <div class="mb-6">
            <label for="inputString" class="block text-sm font-medium text-gray-700 mb-2">è¾“å…¥ç¼–ç å­—ç¬¦ä¸²:</label>
            <textarea id="inputString" rows="5" placeholder="ä¾‹å¦‚ï¼šRkxBR19wcm9ncmVzc39Mb3cgc3BlZWQgZGF0YSB0cmFuc2ZlciBzaWduYWwgZGV0ZWN0ZWQgYnkgLS0+IHN0ZWdzb2x2ZXJtYW59"
                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150 shadow-inner">RkxBR19maW5hbF9wcmV2aWV3e1N0ZWdhbm9ncmFwaHlfTWFzdGVyX01hZGVfRmxhZ19JRF8zNDIxfQ==</textarea>
        </div>

        <!-- è§£ç æŒ‰é’® -->
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8">
            <button onclick="decodeAndDisplay('Base64')"
                class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-4 rounded-lg shadow-md transition duration-200 transform hover:scale-[1.02] active:scale-[0.98]">
                Base64 è§£ç 
            </button>
            <button onclick="decodeAndDisplay('Hex')"
                class="bg-pink-600 hover:bg-pink-700 text-white font-semibold py-3 px-4 rounded-lg shadow-md transition duration-200 transform hover:scale-[1.02] active:scale-[0.98]">
                åå…­è¿›åˆ¶ (Hex) è§£ç 
            </button>
            <button onclick="decodeAndDisplay('ROT13')"
                class="bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-4 rounded-lg shadow-md transition duration-200 transform hover:scale-[1.02] active:scale-[0.98]">
                ROT13 è§£ç 
            </button>
        </div>

        <!-- è¾“å‡ºåŒºåŸŸ -->
        <div class="p-4 bg-indigo-50 border-2 border-indigo-200 rounded-lg">
            <h3 class="text-lg font-medium text-indigo-800 mb-2">è§£ç ç»“æœ:</h3>
            <pre id="outputResult" class="whitespace-pre-wrap break-words text-gray-800 text-sm font-mono">
[Base64 è§£ç ç»“æœ]
FLAG_final_preview{Steganography_Master_Made_Flag_ID_3421}
</pre>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Automatically run Base64 decode on load
            decodeAndDisplay('Base64');
        });

        function displayMessage(message, isError = false) {
            const output = document.getElementById('outputResult');
            output.textContent = message;
            output.className = isError 
                ? 'whitespace-pre-wrap break-words text-red-600 text-sm font-mono' 
                : 'whitespace-pre-wrap break-words text-gray-800 text-sm font-mono';
        }

        function decodeBase64(str) {
            try {
                if (!str) return "é”™è¯¯: è¾“å…¥ä¸èƒ½ä¸ºç©ºã€‚";
                // ç§»é™¤ç©ºæ ¼å¹¶æ·»åŠ  Base64 æ‰€éœ€çš„å¡«å……
                let cleanedStr = str.trim().replace(/\s/g, '');
                const padding = cleanedStr.length % 4;
                if (padding !== 0) {
                    cleanedStr += '='.repeat(4 - padding);
                }

                const decoded = atob(cleanedStr);
                return decoded;
            } catch (e) {
                return "é”™è¯¯: Base64 æ ¼å¼é”™è¯¯æˆ–åŒ…å«éæ³•å­—ç¬¦ã€‚";
            }
        }

        function decodeHex(str) {
            try {
                if (!str) return "é”™è¯¯: è¾“å…¥ä¸èƒ½ä¸ºç©ºã€‚";
                const hex = str.trim().replace(/\s/g, '');
                if (!/^[0-9a-fA-F]+$/.test(hex) || hex.length % 2 !== 0) {
                    return "é”™è¯¯: åå…­è¿›åˆ¶æ ¼å¼é”™è¯¯ (å¿…é¡»æ˜¯å¶æ•°ä½ä¸”åªåŒ…å« 0-9/a-f)ã€‚";
                }
                
                let result = '';
                for (let i = 0; i < hex.length; i += 2) {
                    result += String.fromCharCode(parseInt(hex.substring(i, i + 2), 16));
                }
                return result;
            } catch (e) {
                return "é”™è¯¯: åå…­è¿›åˆ¶è§£ç å¤±è´¥ã€‚";
            }
        }

        function decodeROT13(str) {
            if (!str) return "é”™è¯¯: è¾“å…¥ä¸èƒ½ä¸ºç©ºã€‚";
            return str.replace(/[a-zA-Z]/g, function(c) {
                return String.fromCharCode((c <= 'Z' ? 90 : 122) >= (c = c.charCodeAt(0) + 13) ? c : c - 26);
            });
        }

        function decodeAndDisplay(method) {
            const inputString = document.getElementById('inputString').value;
            let result = '';

            if (!inputString) {
                 displayMessage("è¯·è¾“å…¥æ‚¨ä»å›¾ç‰‡ä¸­æå–åˆ°çš„ç¼–ç å­—ç¬¦ä¸²ï¼", true);
                 return;
            }

            switch (method) {
                case 'Base64':
                    result = decodeBase64(inputString);
                    break;
                case 'Hex':
                    result = decodeHex(inputString);
                    break;
                case 'ROT13':
                    result = decodeROT13(inputString);
                    break;
                default:
                    result = 'æœªçŸ¥çš„è§£ç æ–¹æ³•ã€‚';
            }

            if (result.startsWith("é”™è¯¯:")) {
                displayMessage(result, true);
            } else {
                displayMessage(`[${method} è§£ç ç»“æœ]\n${result}`);
            }
        }

    </script>
</body>
</html>
